@using System.Collections.Specialized
@inject IConfiguration Config

@{
    var consent = Context.Request.Cookies["CookieConsent"];
    var confirmation = TempData["ShowCookieConfirmation"]?.ToString();
    var cookiesPolicyLink = Config.GetValue<string>("CookiesPolicyLink");
}

@if (string.IsNullOrEmpty(consent))
{
    <div class="govuk-cookie-banner" data-nosnippet role="region" aria-label="Cookies on NIHR Hub">
        <div class="govuk-cookie-banner__message govuk-width-container">
            <div class="govuk-grid-row">
                <div class="govuk-grid-column-two-thirds">
                    <h2 class="govuk-cookie-banner__heading govuk-heading-m">
                        Cookies on NIHR Hub
                    </h2>
                    <div class="govuk-cookie-banner__content">
                        <p class="govuk-body">We use some essential cookies to make this service work.</p>
                        <p class="govuk-body">We’d also like to use analytics cookies so we can understand how you use
                            the service and make improvements.</p>
                    </div>
                </div>
            </div>
            <div class="govuk-button-group">
                <form method="post" asp-controller="Cookies" asp-action="Accept">
                    <button type="submit" class="govuk-button">Accept analytics cookies</button>
                </form>
                <form method="post" asp-controller="Cookies" asp-action="Reject">
                    <button type="submit" class="govuk-button">Reject analytics cookies</button>
                </form>
                <a class="govuk-link" asp-controller="Cookies" asp-action="Index">View cookies page</a>
            </div>
        </div>
    </div>
}
else if (!string.IsNullOrEmpty(confirmation))
{
    <div id="cookie-confirmation-banner" class="govuk-cookie-banner" data-nosnippet role="region"
         aria-label="Cookies on NIHR Identity Gateway Portal">
        <div class="govuk-cookie-banner__message govuk-width-container">
            <div class="govuk-grid-row">
                <div class="govuk-grid-column-two-thirds">
                    <div class="govuk-cookie-banner__content">
                        <p class="govuk-body">
                            @if (confirmation == "accepted")
                            {
                                <text>You’ve accepted analytics cookies.</text>
                            }
                            else if (confirmation == "rejected")
                            {
                                <text>You’ve rejected analytics cookies.</text>
                            }
                            You can <a class="govuk-link" asp-controller="Cookies" asp-action="Index">change your cookie
                                settings</a> at any time.
                        </p>
                    </div>
                </div>
            </div>
            <div class="govuk-button-group">
                <button id="cookie-confirmation-hide-button" value="yes" type="submit" name="cookies[hide]"
                        class="govuk-button" data-module="govuk-button">
                    Hide cookie message
                </button>
            </div>
        </div>
    </div>
}